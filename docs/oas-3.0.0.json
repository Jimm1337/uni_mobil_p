{"openapi":"3.0.0","info":{"title":"Aplikacje internetowe i mobilne Project","description":"Temat: Aplikacja socjalna dla zwiedzaj\u0105cych","contact":{"name":"Oskar Gusta"},"license":{"name":"Apache License, Version 2.0","url":"http:\/\/www.apache.org\/licenses\/LICENSE-2.0"},"version":"1.0"},"servers":[{"url":"http:\/\/185.238.75.123:8080\/","description":"server"}],"paths":{"\/login":{"post":{"summary":"Login user.","operationId":"postLogin","tags":["Login"],"responses":{"200":{"description":"OK","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoUser_OUT"}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[],"security":[{"Login":[]}]}},"\/register":{"post":{"summary":"Register user.","operationId":"postRegister","requestBody":{"required":true,"content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoRegister_IN"}}}},"tags":["Login"],"responses":{"400":{"description":"Bad Request","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"201":{"description":"Created","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoUser_OUT"}}}},"409":{"description":"Conflict","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[]}},"\/logout":{"get":{"summary":"Logout user.","operationId":"getLogout","tags":["Login"],"responses":{"401":{"description":"Unauthorized","content":{"text\/plain":{"schema":{"type":"string"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[],"security":[{"Login":[]}]}},"\/places":{"get":{"summary":"Get places by any unique data. Use one data field only. (QueryParams: placeID, name, location, description)","operationId":"getPlaces","tags":["User"],"responses":{"200":{"description":"OK","content":{"application\/json":{"schema":{"type":"array","items":{"$ref":"#\/components\/schemas\/DtoPlace_OUT"}}}}},"204":{"description":"No Content","content":{"text\/plain":{"schema":{"type":"string"}}}},"400":{"description":"Bad Request","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[],"security":[{"User":[]}]},"put":{"summary":"Add or update place in database. Update when: matching name","operationId":"putAdminAddUpdatePlaces","requestBody":{"required":true,"content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoPlace_IN"}}}},"tags":["Admin"],"responses":{"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"403":{"description":"Forbidden","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"200":{"description":"OK","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoPlace_OUT"}}}},"201":{"description":"Created","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoPlace_OUT"}}}},"409":{"description":"Conflict","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"422":{"description":"Unprocessable Entity","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[],"security":[{"Admin":[]}]},"delete":{"summary":"Remove place from database.","operationId":"deleteAdminRemovePlaces","tags":["Admin"],"responses":{"204":{"description":"No Content","content":{"text\/plain":{"schema":{"type":"string"}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"403":{"description":"Forbidden","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"404":{"description":"Not Found","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[{"name":"placeID","in":"query","required":true,"deprecated":false,"schema":{"type":"integer","minimum":-2147483648,"maximum":2147483647}}],"security":[{"Admin":[]}]}},"\/users":{"get":{"summary":"Get users by any unique data. Use one data field only. (QueryParams: userID, username)","operationId":"getUsers","tags":["User"],"responses":{"200":{"description":"OK","content":{"application\/json":{"schema":{"type":"array","items":{"$ref":"#\/components\/schemas\/DtoUser_OUT"}}}}},"204":{"description":"No Content","content":{"text\/plain":{"schema":{"type":"string"}}}},"400":{"description":"Bad Request","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[],"security":[{"User":[]}]},"put":{"summary":"Add or update user in database. Update when: matching username","operationId":"putAdminAddUpdateUsers","requestBody":{"required":true,"content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoUser_IN"}}}},"tags":["Admin"],"responses":{"200":{"description":"OK","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoUser_OUT"}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"403":{"description":"Forbidden","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"201":{"description":"Created","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoUser_OUT"}}}},"422":{"description":"Unprocessable Entity","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[],"security":[{"Admin":[]}]},"delete":{"summary":"Remove user from database.","operationId":"deleteAdminRemoveUsers","tags":["Admin"],"responses":{"204":{"description":"No Content","content":{"text\/plain":{"schema":{"type":"string"}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"403":{"description":"Forbidden","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"404":{"description":"Not Found","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[{"name":"userID","in":"query","required":true,"deprecated":false,"schema":{"type":"integer","minimum":-2147483648,"maximum":2147483647}}],"security":[{"Admin":[]}]}},"\/comments\/{placeID}":{"get":{"summary":"Get comments sorted descending by time for place by placeID in range.","operationId":"getCommentsForPlace","tags":["User"],"responses":{"200":{"description":"OK","content":{"application\/json":{"schema":{"type":"array","items":{"$ref":"#\/components\/schemas\/DtoComment_OUT"}}}}},"204":{"description":"No Content","content":{"text\/plain":{"schema":{"type":"string"}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"416":{"description":"Requested Range Not Satisfiable","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[{"name":"placeID","in":"path","required":true,"deprecated":false,"schema":{"type":"integer","minimum":-2147483648,"maximum":2147483647}},{"name":"start","in":"query","required":true,"deprecated":false,"schema":{"type":"integer","minimum":-2147483648,"maximum":2147483647}},{"name":"end","in":"query","required":true,"deprecated":false,"schema":{"type":"integer","minimum":-2147483648,"maximum":2147483647}}],"security":[{"User":[]}]}},"\/visits\/place\/{placeID}":{"get":{"summary":"Get visits sorted descending by time for place by placeID in range.","operationId":"getVisitsForPlace","tags":["User"],"responses":{"200":{"description":"OK","content":{"application\/json":{"schema":{"type":"array","items":{"$ref":"#\/components\/schemas\/DtoVisit_OUT"}}}}},"204":{"description":"No Content","content":{"text\/plain":{"schema":{"type":"string"}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"416":{"description":"Requested Range Not Satisfiable","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[{"name":"placeID","in":"path","required":true,"deprecated":false,"schema":{"type":"integer","minimum":-2147483648,"maximum":2147483647}},{"name":"start","in":"query","required":true,"deprecated":false,"schema":{"type":"integer","minimum":-2147483648,"maximum":2147483647}},{"name":"end","in":"query","required":true,"deprecated":false,"schema":{"type":"integer","minimum":-2147483648,"maximum":2147483647}}],"security":[{"User":[]}]}},"\/visits\/user\/{userID}":{"get":{"summary":"Get visits sorted descending by time for user by userID in range.","operationId":"getVisitsForUser","tags":["User"],"responses":{"200":{"description":"OK","content":{"application\/json":{"schema":{"type":"array","items":{"$ref":"#\/components\/schemas\/DtoVisit_OUT"}}}}},"204":{"description":"No Content","content":{"text\/plain":{"schema":{"type":"string"}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"416":{"description":"Requested Range Not Satisfiable","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[{"name":"userID","in":"path","required":true,"deprecated":false,"schema":{"type":"integer","minimum":-2147483648,"maximum":2147483647}},{"name":"start","in":"query","required":true,"deprecated":false,"schema":{"type":"integer","minimum":-2147483648,"maximum":2147483647}},{"name":"end","in":"query","required":true,"deprecated":false,"schema":{"type":"integer","minimum":-2147483648,"maximum":2147483647}}],"security":[{"User":[]}]}},"\/ranking":{"get":{"summary":"Get user ranking in range.","operationId":"getUserRanking","tags":["User"],"responses":{"200":{"description":"OK","content":{"application\/json":{"schema":{"type":"array","items":{"$ref":"#\/components\/schemas\/DtoUser_OUT"}}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"416":{"description":"Requested Range Not Satisfiable","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[{"name":"start","in":"query","required":true,"deprecated":false,"schema":{"type":"integer","minimum":-2147483648,"maximum":2147483647}},{"name":"end","in":"query","required":true,"deprecated":false,"schema":{"type":"integer","minimum":-2147483648,"maximum":2147483647}}],"security":[{"User":[]}]}},"\/visits":{"put":{"summary":"Add or update visit in database. Update when: matching placeID and userID","operationId":"putAdminAddUpdateVisits","requestBody":{"required":true,"content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoAdminVisit_IN"}}}},"tags":["Admin"],"responses":{"200":{"description":"OK","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoVisit_OUT"}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"403":{"description":"Forbidden","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"201":{"description":"Created","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoVisit_OUT"}}}},"422":{"description":"Unprocessable Entity","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[],"security":[{"Admin":[]}]},"post":{"summary":"Add visit to place by key for user.","operationId":"postVisits","tags":["User"],"responses":{"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"201":{"description":"Created","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoVisit_OUT"}}}},"409":{"description":"Conflict","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"422":{"description":"Unprocessable Entity","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[{"name":"key","in":"query","required":true,"deprecated":false,"schema":{"type":"string"}}],"security":[{"User":[]}]},"delete":{"summary":"Remove visit from database.","operationId":"deleteAdminRemoveVisits","tags":["Admin"],"responses":{"204":{"description":"No Content","content":{"text\/plain":{"schema":{"type":"string"}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"403":{"description":"Forbidden","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"404":{"description":"Not Found","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[{"name":"visitID","in":"query","required":true,"deprecated":false,"schema":{"type":"integer","minimum":-2147483648,"maximum":2147483647}}],"security":[{"Admin":[]}]}},"\/comments":{"put":{"summary":"Add or update comment in database. Update when: matching placeID and userID","operationId":"putAdminAddUpdateComments","requestBody":{"required":true,"content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoAdminComment_IN"}}}},"tags":["Admin"],"responses":{"200":{"description":"OK","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoComment_OUT"}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"403":{"description":"Forbidden","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"201":{"description":"Created","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoComment_OUT"}}}},"422":{"description":"Unprocessable Entity","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[],"security":[{"Admin":[]}]},"post":{"summary":"Add comment to place by placeID for user.","operationId":"postAddComments","requestBody":{"required":true,"content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoComment_IN"}}}},"tags":["User"],"responses":{"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"412":{"description":"Precondition Failed","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"201":{"description":"Created","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoComment_OUT"}}}},"422":{"description":"Unprocessable Entity","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[],"security":[{"User":[]}]},"delete":{"summary":"Remove comment from database.","operationId":"deleteAdminRemoveComments","tags":["Admin"],"responses":{"204":{"description":"No Content","content":{"text\/plain":{"schema":{"type":"string"}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"403":{"description":"Forbidden","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"404":{"description":"Not Found","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}},"500":{"description":"Internal Server Error","content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/DtoError"}}}}},"parameters":[{"name":"commentID","in":"query","required":true,"deprecated":false,"schema":{"type":"integer","minimum":-2147483648,"maximum":2147483647}}],"security":[{"Admin":[]}]}}},"components":{"schemas":{"DtoUser_OUT":{"type":"object","properties":{"id":{"type":"integer","description":"User ID","minimum":-2147483648,"maximum":2147483647},"username":{"type":"string","description":"Username"},"points":{"type":"integer","description":"Points","minimum":-2147483648,"maximum":2147483647}},"required":["id","username","points"]},"DtoPlace_OUT":{"type":"object","properties":{"id":{"type":"integer","description":"Place ID","minimum":-2147483648,"maximum":2147483647},"name":{"type":"string","description":"Place name"},"description":{"type":"string","description":"Place description"},"location":{"type":"string","description":"Place location"}},"required":["id","name","location"]},"DtoAdminVisit_IN":{"type":"object","properties":{"UserID":{"type":"integer","description":"User ID","minimum":-2147483648,"maximum":2147483647},"PlaceID":{"type":"integer","description":"Place ID","minimum":-2147483648,"maximum":2147483647}},"required":["UserID","PlaceID"]},"ErrorType_String":{"type":"string","enum":["Unknown error","Implementation error","Database error","Range value too low","Range value too high","Object of requested type and id does not exist","Object already exists","User did not visit commented site","Input data has bad structure","Insufficient permission","Data format error","Bad credentials","No matching key for place"]},"DtoError":{"type":"object","properties":{"type":{"description":"Error type","$ref":"#\/components\/schemas\/ErrorType_String"},"message":{"type":"string","description":"Error message"}},"required":["type","message"]},"DtoComment_IN":{"type":"object","properties":{"PlaceID":{"type":"integer","description":"Place ID","minimum":-2147483648,"maximum":2147483647},"Content":{"type":"string","description":"Comment Content"}},"required":["PlaceID","Content"]},"DtoRegister_IN":{"type":"object","properties":{"Username":{"type":"string","description":"Username"},"Login":{"type":"string","description":"Login"},"Password":{"type":"string","description":"Password"}},"required":["Username","Login","Password"]},"DtoComment_OUT":{"type":"object","properties":{"id":{"type":"integer","description":"Comment ID","minimum":-2147483648,"maximum":2147483647},"userid":{"type":"integer","description":"User ID","minimum":-2147483648,"maximum":2147483647},"placeid":{"type":"integer","description":"Place ID","minimum":-2147483648,"maximum":2147483647},"content":{"type":"string","description":"Comment Content"},"timestmp":{"type":"string","description":"Comment Time","pattern":"HH24:MM:SS DD\/MM\/YYYY (UTC)"},"likes":{"type":"integer","description":"Number of likes","minimum":-2147483648,"maximum":2147483647}},"required":["id","userid","placeid","content","timestmp","likes"]},"DtoVisit_OUT":{"type":"object","properties":{"id":{"type":"integer","description":"Visit ID","minimum":-2147483648,"maximum":2147483647},"userid":{"type":"integer","description":"User ID","minimum":-2147483648,"maximum":2147483647},"placeid":{"type":"integer","description":"Place ID","minimum":-2147483648,"maximum":2147483647},"timestmp":{"type":"string","description":"Visit Time","pattern":"HH24:MM:SS DD\/MM\/YYYY (UTC)"}},"required":["id","userid","placeid","timestmp"]},"DtoPlace_IN":{"type":"object","properties":{"Name":{"type":"string","description":"Place name"},"Description":{"type":"string","description":"Place description"},"Location":{"type":"string","description":"Place location"},"Key":{"type":"string","description":"Place visit key"}},"required":["Name","Location","Key"]},"DtoUser_IN":{"type":"object","properties":{"Username":{"type":"string","description":"Username"},"Login":{"type":"string","description":"Login"},"Password":{"type":"string","description":"Password"},"Admin":{"type":"boolean","description":"Is admin?"},"Points":{"type":"integer","description":"Points","minimum":-2147483648,"maximum":2147483647}},"required":["Username","Login","Password","Admin","Points"]},"DtoAdminComment_IN":{"type":"object","properties":{"UserID":{"type":"integer","description":"User ID","minimum":-2147483648,"maximum":2147483647},"PlaceID":{"type":"integer","description":"Place ID","minimum":-2147483648,"maximum":2147483647},"Content":{"type":"string","description":"Comment Content"},"Likes":{"type":"integer","description":"Number of likes","minimum":-2147483648,"maximum":2147483647}},"required":["UserID","PlaceID","Content"]}}}}